# PlayCover Manager v5.0.0 - Stable Release

## 🎉 正式安定版リリース

PlayCover Manager の最初の正式安定版をリリースします。

## ✨ 主要機能

### コア機能
- ✅ PlayCover用APFSボリューム管理
- ✅ 外部ストレージへのゲームデータ移行
- ✅ 内蔵⇄外部ストレージ切り替え
- ✅ バッチマウント/アンマウント操作
- ✅ 完全クリーンアップ機能

### データ保護
- ✅ 容量チェック（10%安全マージン付き）
- ✅ アプリ実行中チェック
- ✅ rsync同期による安全なデータ転送
- ✅ フラグファイルによる状態管理

### ユーザーエクスペリエンス
- ✅ カラー絵文字統一（視認性向上）
- ✅ APFS容量表示に関する説明追加
- ✅ 1000-base容量表示（macOS Finder準拠）
- ✅ 内蔵データマージオプション

## 🐛 修正されたバグ

### 重大バグ修正（v5.0.0）
1. **batch_mount_all/batch_unmount_all関数未実装** - 完全実装
2. **非PlayCoverボリュームのマウント失敗** - デバイスパス使用に修正
3. **sudo不要な関数へのsudo使用** - 削除、KB→bytes変換も修正
4. **アプリ実行中の強制アンマウント** - 実行中チェック追加
5. **フラグファイル配置タイミング不正** - アンマウント成功後のみ作成

### 追加修正
6. **容量表示精度の改善** - 小数点1桁に制限
7. **batch mount位置調整ループ** - PLAYCOVER_BASE定数追加
8. **内蔵データ検出の誤検出** - `find -type f`で実ファイルのみカウント
9. **tailコマンドパス不足** - フルパス使用で0B問題解決
10. **macOSコンテナ構造の誤検出** - システムファイル除外リスト追加

## 🔧 技術詳細

### アーキテクチャ
- **モジュール数**: 8個（00_core〜07_ui）
- **総コード行数**: 6,075行
- **言語**: Zsh（macOS標準シェル）

### 動作環境
- macOS Sequoia 15.1以降
- Apple Silicon Mac（M1/M2/M3/M4）
- PlayCover 3.0以降
- 外部ストレージ（APFS対応）

### セキュリティ
- sudo権限は必要最小限のみ
- データ破損防止のための多重チェック
- ユーザー確認プロンプト（破壊的操作）

## 📝 既知の制限

1. **APFS容量表示**: macOSの仕様により、Finderで容量が実際と異なって見える場合があります
   - ツールは正常動作しています
   - 実際の効果はMacintosh HDの「使用済み」で確認してください

2. **Intel Mac未サポート**: Apple Silicon専用です

## 🙏 謝辞

このバージョンは、徹底的なバグ修正とロジック検証を経てリリースされました。
全ての重大バグが修正され、本番環境での使用に適しています。

---

**リリース日**: 2025年10月28日
**バージョン**: 5.0.0
**ライセンス**: MIT
